<script setup>
import { ref } from "vue";
import { useData } from "vitepress";

// è·å–å½“å‰é¡µé¢çš„ frontmatter æ•°æ®
const { frontmatter } = useData();
const password = ref(""); // å¯†ç è¾“å…¥æ¡†
const isAuthenticated = ref(false); // æ˜¯å¦å·²é€šè¿‡å¯†ç éªŒè¯

// âœ… æ ¡éªŒå¯†ç 
function checkPassword() {
  if (password.value === frontmatter.value.password) {
    isAuthenticated.value = true;
  } else {
    alert("å¯†ç é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ï¼");
  }
}
</script>

<template>
  <div v-if="isAuthenticated">
    <!-- âœ… é€šè¿‡å¯†ç éªŒè¯åï¼Œå±•ç¤ºé¡µé¢å†…å®¹ -->
    <Content />
  </div>

  <div v-else class="protected-container">
    <h1>ğŸ” æ­¤é¡µé¢å—å¯†ç ä¿æŠ¤</h1>
    <p>è¯·è¾“å…¥å¯†ç ä»¥è®¿é—®æ­¤é¡µé¢ï¼š</p>
    <input v-model="password" type="password" placeholder="è¾“å…¥å¯†ç " />
    <button @click="checkPassword">æäº¤</button>
  </div>
</template>

<style scoped>
.protected-container {
  text-align: center;
  margin-top: 20%;
}
input,
button {
  padding: 10px;
  margin-bottom: 10px;
}
</style>
